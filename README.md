Домашнее задание к занятию "`Резервное копирование баз данных`" - `Кошель Николай Павлович`

# Домашнее задание к занятию «Резервное копирование баз данных»

**Домашнее задание выполните в Google Docs или в md-файле в вашем репозитории GitHub.** 

Для оформления вашего решения в GitHub можете воспользоваться [шаблоном](https://github.com/netology-code/sys-pattern-homework).

Название файла должно содержать номер лекции и фамилию студента. Пример названия: «12.8. Резервное копирование баз данных — Александр Александров».

Перед тем как выслать ссылку, убедитесь, что её содержимое не является приватным, то есть открыто на просмотр всем, у кого есть ссылка. Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

*Приведите ответ в свободной форме.*

---
#### Ответы
1.1. Для восстановления данных в полном объёме за предыдущий день наиболее подходящим вариантом является ежедневное полное резервное копирование. Оно позволяет сохранить все данные за день и восстановить их полностью, если потребуется.
1.2. Для восстановления данных за час до предполагаемой поломки наиболее подходят инкрементальные или дифференциальные резервные копии. Инкрементальные копируют только изменения с последнего резервного копирования, а дифференциальные — все изменения с последней полной копии. В случае необходимости можно быстро восстановить состояние базы данных за нужный час.
1.3*. Моментальное переключение на рабочую или починенную базу данных при поломке — это возможно с помощью технологии кластеризации или репликации. В таких системах одна база служит основой, а другие — резервными или репликами, которые автоматически берут на себя работу при сбое основной базы. Это обеспечивает минимальный простои и мгновенное переключение без потери данных.

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

2.1.* Возможно ли автоматизировать этот процесс? Если да, то как?

*Приведите ответ в свободной форме.*

---
#### Ответы
Резервирование базы данных с помощью pg_dump:
pg_dump -U имя_пользователя -Fc -f имя_файла.dump имя_базы_данных
Восстановление базы данных с помощью pg_restore:
pg_restore -U имя_пользователя -d имя_базы_данных имя_файла.dump
Можно ли автоматизировать этот процесс? Да, это возможно. Обычно автоматизация достигается с помощью скриптов (например, bash или PowerShell), которые запускают эти команды по расписанию с помощью планировщика задач (cron в Linux или планировщика задач в Windows). Также для более сложных сценариев используют системы автоматического резервного копирования и оркестрации, такие как Ansible, Puppet или собственные решения на основе скриптов.

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 

3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

*Приведите ответ в свободной форме.*

---

#### Ответы
mysqldump --incremental --incremental-base=history:last_backup --result-file=backup_incremental.sql db_name
Это команда создаст инкрементальную копию базы данных db_name, используя опции для инкрементного резервного копирования.

Репликации в MySQL дают преимущества по сравнению с обычным резервным копированием в следующих случаях:

Постоянное тестирование и анализ данных в реальном времени, так как реплика содержит актуальную копию базы данных.
Обеспечение высокой доступности системы при отказе основного сервера, поскольку реплика может служить резервным ресурсом.
Распределение нагрузки для чтения. Можно направлять часть запросов к реплике, снижая нагрузку на основной сервер.
Восстановление данных — позволяет быстро переключиться на реплику при критических сбоях основного сервера, вместо выполнения долгого восстановления из резервных копий.



Задания, помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.
